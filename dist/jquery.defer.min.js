/*! Defer - v0.1.2b - 2013-04-11
* https://github.com/wheresrhys/jquery.defer
* Copyright (c) 2013 Rhys Evans; Licensed MIT */
(function(e){var t=function(e,t,r){return n(t[e],r)},n=function(t,n){if(!e.isArray(n)){if(!n.promise)return t;n=[n]}var r=function(){var r=this,i=arguments;e.when.apply(null,n).done(function(){t.apply(r,i)})};return r._originalFunction=t,r},r={defer:function(e){return t(e,this.obj,this.deferred)},undefer:function(e){return this.obj[e]._originalFunction||this.obj[e]}},i=function(e,t,n){this.obj=e,this.deferred=t,this.options=n,this.mode=n.mode,this.run()};i.prototype.run=function(){var t=this.options,i=!!t&&!!t.applyToPrototype,s={},o,u,a;this.mutator=r[this.mode];if(this.mode==="undefer"&&e.isFunction(this.obj))return this.obj;if(e.isFunction(this.obj))this.func=n(this.obj,this.deferred);else if(t&&t.methods){o=t.methods.split(" ");for(a=o.length-1;a>=0;a--)this.obj[o[a]]=this.mutator(o[a])}else{if(t&&t.exclude){o=t.exclude.split(" ");for(a=o.length-1;a>=0;a--)s[o[a]]=!0}for(u in this.obj){if(s[u])continue;(i||this.obj.hasOwnProperty(u))&&e.isFunction(this.obj[u])&&(this.obj[u]=this.mutator(u))}}},e.defer=function(t,n,r){r=e.extend(r||{},{mode:"defer"});var s=new i(t,n,r);return s.func||t},e.undefer=function(t,n){return n=e.extend(n||{},{mode:"undefer"}),new i(t,n.deferred||null,n),t}})(jQuery);