/*! Defer - v0.1.0 - 2013-01-30
* https://github.com/wheresrhys/jquery.defer
* Copyright (c) 2013 Rhys Evans; Licensed MIT */
(function(e){var t=function(e,t,r){return n(t[e],r)},n=function(t,n){if(!e.isArray(n)){if(!n.promise)return t;n=[n]}var r=function(){var r=this,i=arguments;e.when.apply(null,n).done(function(){t.apply(r,i)})};return r._originalFunction=t,r},r={defer:function(e){return t(e,this.obj,this.deferred)},undefer:function(e){return this.obj[e]._originalFunction||this.obj[e]}},i=function(e,t,n){this.obj=e,this.deferred=t,this.options=n,this.mode=n.mode,this.run()};i.prototype.run=function(){var t=this.options,i=!!t&&!!t.applyToPrototype,s,o,u;this.mutator=r[this.mode];if(this.mode==="undefer"&&e.isFunction(this.obj))return this.obj;if(e.isFunction(this.obj))this.func=n(this.obj,this.deferred);else if(t&&t.methods){s=t.methods.split(" ");for(u=s.length-1;u>=0;u--)this.obj[s[u]]=this.mutator(s[u])}else{t&&t.exclude?s=t.exclude.split(" "):s=[];for(o in this.obj){if(s.indexOf(o)>-1)continue;(i||this.obj.hasOwnProperty(o))&&e.isFunction(this.obj[o])&&(this.obj[o]=this.mutator(o))}}},e.defer=function(t,n,r){r=e.extend(r||{},{mode:"defer"});var s=new i(t,n,r);return s.func||t},e.undefer=function(t,n){return n=e.extend(n||{},{mode:"undefer"}),new i(t,n.deferred||null,n),t}})(jQuery);