/*! Defer - v0.1.2b - 2013-04-11
* https://github.com/wheresrhys/jquery.defer
* Copyright (c) 2013 Rhys Evans; Licensed MIT */
(function(t){var e=function(t,e,i){return n(e[t],i)},n=function(e,n){if(!t.isArray(n)){if(!n.promise)return e;n=[n]}var i=function(){var i=this,o=arguments;t.when.apply(null,n).done(function(){e.apply(i,o)})};return i._originalFunction=e,i},i={defer:function(t){return e(t,this.obj,this.deferred)},undefer:function(t){return this.obj[t]._originalFunction||this.obj[t]}},o=function(t,e,n){this.obj=t,this.deferred=e,this.options=n,this.mode=n.mode,this.run()};o.prototype.run=function(){var e,o,r,s=this.options,u=!(!s||!s.applyToPrototype),f={};if(this.mutator=i[this.mode],"undefer"===this.mode&&t.isFunction(this.obj))return this.obj;if(t.isFunction(this.obj))this.func=n(this.obj,this.deferred);else if(s&&s.methods)for(e=s.methods.split(" "),r=e.length-1;r>=0;r--)this.obj[e[r]]=this.mutator(e[r]);else{if(s&&s.exclude)for(e=s.exclude.split(" "),r=e.length-1;r>=0;r--)f[e[r]]=!0;for(o in this.obj)f[o]||(u||this.obj.hasOwnProperty(o))&&t.isFunction(this.obj[o])&&(this.obj[o]=this.mutator(o))}},t.defer=function(e,n,i){i=t.extend(i||{},{mode:"defer"});var r=new o(e,n,i);return r.func||e},t.undefer=function(e,n){return n=t.extend(n||{},{mode:"undefer"}),new o(e,n.deferred||null,n),e}})(jQuery);